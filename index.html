<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TDTTI THURAVOOR - USS Portal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
--primary: #4361ee; --secondary: #3f37c9; --accent: #4cc9f0;
--success: #4caf50; --error: #f44336; --bg: #f0f2f5;
--glass: rgba(255, 255, 255, 0.9); --shadow: 0 8px 32px rgba(0,0,0,0.1);
}
* { box-sizing: border-box; font-family: 'Noto Sans Malayalam', 'Noto Sans Arabic', 'Inter', sans-serif;
-webkit-tap-highlight-color: transparent;}

  

body {
margin: 0; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
background-attachment: fixed; min-height: 100vh; color: #333; display: flex; flex-direction: column;
}

.app-container { width:100%; max-width: 1200px; margin: 0 auto; padding: 15px; flex: 1; }

/* Requirement 1: Sticky Navigation */
.sticky-nav-wrapper {
position: sticky; top: 0; z-index: 9999;
background: rgba(245, 247, 250, 0.85); backdrop-filter: blur(12px);
margin: -15px -15px 15px -15px; padding: 15px 15px 5px 15px;
border-bottom: 1px solid rgba(0,0,0,0.05);
}

.glass-card { background: var(--glass); backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid rgba(255,255,255,0.3); box-shadow: var(--shadow); padding: clamp(15px, 5vw, 30px); margin-bottom: 20px; }

.school-logo { width: 200px; height: 200px; margin: 0 auto 15px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); overflow: hidden; }
.school-logo img { width: 90%; height: 90%; object-fit: contain; }

nav { display: none; gap: 10px; margin-bottom: 15px; justify-content: center; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; align-items: center;}
nav::-webkit-scrollbar { display: none; }

nav button { padding: 10px 20px; border: none; border-radius: 12px; cursor: pointer; background: white; color: var(--primary); font-weight: 600; transition: 0.3s; white-space: nowrap; box-shadow: 0 4px 6px rgba(0,0,0,0.05); font-size: clamp(0.8rem, 2.5vw, 1rem); }
nav button:hover, nav button.active-nav { background: var(--primary); color: white; }

/* Requirement 4: Timer in Nav */
#nav-timer {
display: none; background: green; color: #fff; padding: 8px 15px;
border-radius: 10px; font-weight: 800; font-family: monospace; font-size: 1.1rem;
border: 2px solid var(--accent);
}
.timer-warn { background: var(--error) !important; animation: blinker 1s linear infinite; }
@keyframes blinker { 50% { opacity: 0.5; } }

#user-profile { display: none; align-items: center; justify-content: space-between; background: var(--primary); color: white; padding: 10px 20px; border-radius: 15px; margin-bottom: 10px; }

.summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin: 20px 0; }
@media (max-width: 480px) { .summary-grid { grid-template-columns: repeat(2, 1fr); } }
  /* Mobile First (phones) */
@media (max-width: 600px) {

  .app-container {
    padding: 10px;
  }

  .school-logo {
    width: 140px;
    height: 140px;
  }

  h1 {
    font-size: 1.3rem !important;
  }

  h3 {
    font-size: 1rem !important;
  }

  nav {
    flex-wrap: nowrap;
    justify-content: flex-start;
  }

  nav button {
    padding: 8px 14px;
    font-size: 0.75rem;
  }

  #nav-timer {
    font-size: 0.9rem;
    padding: 6px 10px;
  }

  .glass-card {
    border-radius: 16px;
    padding: 14px;
  }

  .summary-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  table {
    font-size: 0.75rem;
  }

  canvas {
    width: 100% !important;
  }
}

/* Tablets */
@media (min-width: 601px) and (max-width: 1024px) {

  .app-container {
    max-width: 95%;
  }

  nav button {
    font-size: 0.85rem;
  }

  .school-logo {
    width: 170px;
    height: 170px;
  }
}

/* Large Screens / Desktop */
@media (min-width: 1025px) {

  .app-container {
    max-width: 1200px;
  }

  nav {
    justify-content: center;
  }

}

canvas { width: 100% !important; height: auto !important; }

#msg-overlay { display: none; position: fixed; inset: 0; background: rgba(255,255,255,0.8); backdrop-filter: blur(8px); z-index: 100000; justify-content: center; align-items: center; flex-direction: column; padding: 20px; }
.spinner { width: 60px; height: 60px; border: 6px solid #f3f3f3; border-top: 6px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

input, select, textarea { width: 100%; padding: 14px; margin: 10px 0; border: 2px solid #eee; border-radius: 12px; font-size: 1rem; background: #fafafa; outline: none; }
.btn-main { width: 100%; padding: 16px; border: none; border-radius: 12px; background: var(--primary); color: white; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: 0.3s; }
.q-card { background: white; padding: 18px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--primary); box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
.table-container { overflow-x: auto; border-radius: 15px; border: 1px solid #eee; background: white; }
table { width: 100%; border-collapse: collapse; min-width: 800px; }
th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: center; font-size: 0.9rem; }

.tab { display: none; animation: fadeIn 0.4s ease; }
.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Stylish grade badge */
.grade-badge { background: var(--accent); color: white; padding: 5px 15px; border-radius: 50px; font-weight: 800; font-size: 1.5rem; box-shadow: 0 4px 10px rgba(76, 201, 240, 0.4); }
.q-card input[type="radio"] {
display: none;
}

/* Make option fully clickable */
.option-label {
display: block;
padding: 14px;
margin: 6px 0;
background: #f9f9f9;
border-radius: 12px;
cursor: pointer;
font-size: 0.9rem;
border: 2px solid transparent;
transition: all 0.2s ease;
}

/* Hover / touch feedback */
.option-label:hover {
background: #eef2ff;
}

/* Selected option style */
.q-card input[type="radio"]:checked + .option-label {
background: #e0e7ff;
border-color: var(--primary);
font-weight: 700;
}
  .rtl-arabic {
  direction: rtl;
  text-align: right;
}
  
</style>
</head>
<body onload="checkPersistentLogin()">

<div id="msg-overlay">
<div id="loader-content">
<div class="spinner"></div>
<h3 id="loader-text" style="color: var(--primary);">Connecting...</h3>
</div>
<div id="status-content" style="display: none; text-align: center;" class="glass-card">
<div id="status-icon" style="font-size: 50px; margin-bottom: 10px;"></div>
<h2 id="status-title"></h2>
<p id="status-msg" style="margin-bottom: 20px;"></p>
<button class="btn-main" onclick="closeMsg()" style="width: auto; padding: 10px 30px;">Continue</button>
</div>
</div>

<div class="app-container">
<div id="sticky-header-container" class="sticky-nav-wrapper" style="display:none;">
<div id="user-profile">
<div style="display: flex; align-items: center; gap: 12px;">
<div style="width:40px; height:40px; background:white; color:var(--primary); border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold;" id="user-initial">?</div>
<div>
<div style="font-size: 0.65rem; opacity: 0.8; font-weight:700;">TDTTI THURAVOOR</div>
<div id="display-name" style="font-weight: 700; font-size: 1rem;">User</div>
</div>
</div>
<button onclick="logout()" style="background:transparent; border:1px solid white; color:white; border-radius:8px; padding:5px 12px; cursor:pointer; font-size:0.8rem;">LOGOUT</button>
</div>

<nav id="navbar">
<button id="nav-tab2" onclick="showTab('tab2')">Daily Exam</button>
<div id="nav-timer">15:00</div>
<button id="nav-tab3" onclick="showTab('tab3')">My Progress</button>
<button id="ins-nav" style="display:none;" onclick="showTab('tab5')">Inspirations</button>
<button id="admin-nav" style="display:none;" onclick="showTab('tab4')">Admin</button>
</nav>
</div>



<div id="tab1" class="tab active">
<div class="glass-card" style="max-width: 450px; margin: 40px auto; text-align: center;">
<div class="school-logo">
<img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhkek9231Po5qKTRbN726okbctluF2YgOX_RcMke2yCBQBj2JcXw4Uu2UhrrlTGgM_bfWeZGKkiB0qwlpq8kAgJWHeWM5fN_6eqkkE2zTJHd163AVjiiA5kmDz0pUYxEE_XqpSYYkDrl-rv-iA0XO_mkny4x4BZb27QCRcpsIp6-uMSQLY/s1600/Logo2.png" alt="TDTTI Logo">
</div>
<h1 style="color: var(--primary); margin: 0 0 5px 0; font-size: 1.6rem;">TDTTI THURAVOOR</h1>
<h3 style="color: var(--secondary); margin: 0 0 10px 0; font-weight: 600;">USS SCHOLARS 2025</h3>
<p style="color: #666; font-size:0.85rem; margin-bottom: 25px; border-top: 1px solid #eee; padding-top: 10px;">Sign In - USS Daily Training Portal</p>

<input type="text" id="uid" placeholder="User ID">
<input type="password" id="ups" placeholder="Password">

<label style="display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.9rem; color: #666; cursor: pointer; margin-bottom: 15px;">
<input type="checkbox" id="keep-signed" style="width: auto; margin: 0;"> Keep me signed in
</label>

<button class="btn-main" onclick="handleLogin()">Enter Portal</button>
</div>
  
 


</div>

<div id="tab2" class="tab">
<div id="exam-form" class="glass-card">
<div style="background: #eef2ff; padding: 15px; border-radius: 12px; margin-bottom: 20px;">
<label style="font-weight: 700; color: var(--primary); font-size:0.9rem;">Select Language 1 to Start:</label>
<select id="lang-select" onchange="startExamWithTimer()">
<option value="" disabled selected>-- Choose Language --</option>
<option value="lang1_arb">Arabic</option>
<option value="lang1_skt">Sanskrit</option>
<option value="lang1_mal1">Malayalam I</option>
</select>
</div>
  
  
<div id="quiz-load"></div>
<button id="s-btn" class="btn-main" style="background: var(--success); display:none;" onclick="submitExam()">Submit Results</button>
</div>

<div id="exam-result-view" style="display:none;">
<div class="glass-card">
<h3 style="margin-top:0; color: var(--primary);">Performance Review</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px; font-size: 0.9rem;">
<div><b>Date:</b> <span id="res-date"></span></div>
<div><b>Name:</b> <span id="res-name"></span></div>
<div><b>Class:</b> <span id="res-cl"></span></div>
<div><b>Division:</b> <span id="res-dv"></span></div>
<div><b>Lang 1:</b> <span id="res-lang1"></span></div>
<div><b>User ID:</b> <span id="res-uid"></span></div>
</div>

<div style="display: flex; align-items: center; justify-content: space-between; background: #f8f9ff; padding: 15px; border-radius: 15px;">
<div>
<div style="font-size: 0.8rem; color: #666;">TOTAL SCORE</div>
<div style="font-size: 2.5rem; font-weight: 800; color: var(--primary);"><span id="res-total"></span>/24</div>
</div>
<div style="text-align: right;">
<div style="font-size: 0.8rem; color: #666; margin-bottom: 5px;">GRADE</div>
<div id="res-grade-badge" class="grade-badge"></div>
</div>
</div>
<div id="res-summary" class="summary-grid"></div>
</div>
<div class="glass-card">
<h4 style="margin-top:0;">Question Detail</h4>
<div id="res-review-list"></div>
</div>
<div style="display: flex; gap: 10px; margin-bottom: 30px;">
<button class="btn-main" onclick="tryQuizAgain()">Try Quiz Again</button>
<button class="btn-main" style="background:#666;" onclick="showTab('tab3')">Progress Chart</button>
</div>
</div>
</div>

<div id="tab3" class="tab">
  
 
  
  
<div class="glass-card" id="progress-summary-box" style="margin-bottom: 20px; border-left: 5px solid var(--accent);">
<h3 style="margin-top:0; color: var(--secondary);">Student Summary</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 1rem;">
<p style="margin:0;"><b>Name:</b> <span id="summ-name"></span></p>
<p style="margin:0;"><b>Class:</b> <span id="summ-class"></span></p>
<p style="margin:0;"><b>Division:</b> <span id="summ-div"></span></p>
<p style="margin:0;"><b>Exams Attended:</b> <span id="summ-count" style="color:var(--primary); font-weight:700;">0</span></p>
<p style="margin:0; grid-column: span 2;"><b>Grand Total Score:</b> <span id="summ-grand" style="color:var(--success); font-weight:800; font-size:1.4rem;">0</span></p>
</div>
</div>
  
  
  
<div class="glass-card">
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
  
<h3 style="margin:0;">Growth Analysis</h3>
<div style="background:var(--error); color:white; padding:5px 15px; border-radius:15px; font-weight:700; font-size:0.9rem;">Grade: <span id="p-grade"></span></div>
</div>
<div style="position: relative; height:300px; width:100%;">
<canvas id="chartArea"></canvas>
</div>
</div>
  <div class="glass-card" id="my-review-box">
  <h3 style="margin-top:0; color: var(--primary);">
    My Performance Reviews
  </h3>
  <div id="my-review-list"></div>
</div>
</div>

<div id="tab5" class="tab">
<div class="glass-card">
  <h3 style="margin-top:0; color: var(--primary);">Student Exams</h3>
  <label style="font-weight:700; font-size:0.9rem;">Select Student</label>
  <select id="student-select" onchange="loadStudentExams()"><option value="">-- Choose Student --</option></select>
  <div id="student-exam-list" style="margin-top:20px;"></div>
</div>
  
 <div class="glass-card">  
<h3 style="margin-top:0;">Global Performance</h3>
<div class="table-container">
<table id="ins-table">
<thead>
<tr>
<th onclick="sortTable(0)">Name ↑↓</th><th>Cls</th><th>Div</th><th>L1</th><th>M2</th><th>Mat</th><th>Eng</th><th>BS</th><th>SS</th><th>MA</th><th>CA</th>
<th onclick="sortTable(11)">Exams ↑↓</th><th onclick="sortTable(12)">Total ↑↓</th><th onclick="sortTable(13)">Grd ↑↓</th>
</tr>
</thead>
<tbody id="ins-body"></tbody>
</table>
</div>
</div>
 

</div>

<div id="tab4" class="tab">
<div class="glass-card">
<h3>Add New Question</h3>
<div id="q-input-fields">
  <select id="qs">
<option value="lang1_arb">Arabic</option><option value="lang1_skt">Sanskrit</option><option value="lang1_mal1">Malayalam I</option>
<option value="mal2">Malayalam II</option><option value="maths">Maths</option><option value="eng">English</option>
<option value="bs">Basic Science</option><option value="ss">Social Science</option><option value="mental">Mental Ability</option><option value="current">Current Affairs</option>
</select>
<input type="text" id="qt" placeholder="Question Text">
<div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
<input type="text" id="o1" placeholder="Option A">
<input type="text" id="o2" placeholder="Option B">
<input type="text" id="o3" placeholder="Option C">
<input type="text" id="o4" placeholder="Option D">
</div>
<input type="text" id="qa" placeholder="Correct Answer">

</div>
<button class="btn-main" onclick="makeQ()">Generate Code</button>
<textarea id="q-code" readonly style="margin-top:10px; height:80px;"></textarea>
</div>
  <!-- Attendance Section -->
<div class="glass-card" style="300px: auto; margin: 10px auto;">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h3 style="margin:0; color: var(--primary);">Attendance</h3>
    <button onclick="copyAttendanceTable()"
      style="padding:6px 14px; border-radius:8px; border:none;
             background:var(--secondary); color:white; font-weight:600; cursor:pointer;">
      Copy
    </button>
  </div>

  <table id="attendance-table"
    style="width:100%; margin-top:15px; border-collapse:collapse;">
    <thead>
      <tr style="background:#eef2ff;">
        <th onclick="sortAttendance(0)"
    style="padding:10px; border:1px solid #ddd; cursor:pointer;">
  Student Name <span id="sort-name"></span>
</th>

<th onclick="sortAttendance(1)"
    style="padding:10px; border:1px solid #ddd; cursor:pointer;">
  No. of Exams Attended <span id="sort-exams"></span>
</th>

      </tr>
    </thead>
    <tbody id="attendance-body">
      <tr>
        <td colspan="2" style="padding:12px; text-align:center; color:#666;">
          Loading attendance…
        </td>
      </tr>
    </tbody>
  </table>
</div>
</div>
  
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyvR2DNBQzwtDdt6KngGABQq1yC_73tEps4d0JvFIwGG6z8jt8y227Bf7SZg8TILVTI/exec";
  
const students = [
{id:"USS001", pass:"AF1", name:"AAISHA FIDHA", class:"7", div:"D", role:"student"},
{id:"USS002", pass:"ACS2", name:"AALIYA C S", class:"7", div:"D", role:"student"},
{id:"USS003", pass:"AK3", name:"ANANDHAKRISHNAN ", class:"7", div:"B", role:"student"},
{id:"USS004", pass:"AA4", name:"ANSHITHA ANEESH", class:"7", div:"B", role:"student"},
{id:"USS005", pass:"ATS5", name:"ANUSREE T S", class:"7", div:"B", role:"student"},
{id:"USS006", pass:"BSK6", name:"BHAGATH S KUMAR", class:"7", div:"B", role:"student"},
{id:"USS007", pass:"DTR7", name:"DEVANANDA T R", class:"7", div:"C", role:"student"},
{id:"USS008", pass:"FSKS8", name:"FATHIMATH SAHRA K S", class:"7", div:"D", role:"student"},
{id:"USS009", pass:"HNKS9", name:"HARI NARAYANAN K S", class:"7", div:"B", role:"student"},
{id:"USS010", pass:"KKN10", name:"KUNAL KIRAN NAGDA", class:"7", div:"B", role:"student"},
{id:"USS011", pass:"MNM11", name:"MALAVIKA N M", class:"7", div:"B", role:"student"},
{id:"USS012", pass:"MMH12", name:"MEENAKSHY M HEGDE", class:"7", div:"B", role:"student"},
{id:"USS013", pass:"PPS13", name:"PRATHITHA P SHENOY", class:"7", div:"B", role:"student"},
{id:"USS014", pass:"SS14", name:"SARANGI S", class:"7", div:"B", role:"student"},
{id:"USS015", pass:"SP15", name:"SREEBALA PRASANTH", class:"7", div:"B", role:"student"},
{id:"USS016", pass:"SH16", name:"SREEBHADRA H", class:"7", div:"B", role:"student"},
{id:"USS017", pass:"SSP17", name:"SUKESH S PAI", class:"7", div:"B", role:"student"},
{id:"USS018", pass:"VSB18", name:"VARALAKSHMY S BHAT", class:"7", div:"B", role:"student"},
{id:"USS019", pass:"VA", name:"AJITH V", class:"7", div:"E", role:"student"},
{id:"ADMIN", pass:"123456", name:"Teacher", class:"-", div:"-", role:"teacher"}
];

const masterBank = [

{"question":"ما هي لغة القرآن الكريم؟","options":["العربية","الفارسية","الأردية","التركية"],"answer":"العربية","subject":"lang1_arb"},
{"question":"كم عدد حروف اللغة العربية؟","options":["28","25","29","27"],"answer":"28","subject":"lang1_arb"},
{"question":"أيّ من الآتي من أقسام الكلمة في اللغة العربية؟","options":["اسم","فعل","حرف","جميع ما سبق"],"answer":"جميع ما سبق","subject":"lang1_arb"},{"question":"ما معنى كلمة «كتاب»؟","options":["قلم","دفتر","كتاب","مدرسة"],"answer":"كتاب","subject":"lang1_arb"},
{"question":"ما جمع كلمة «ولد»؟","options":["أولاد","بنات","رجال","نساء"],"answer":"أولاد","subject":"lang1_arb"},
{"question":"أيّ من الآتي اسم علم؟","options":["محمد","كتاب","بيت","قلم"],"answer":"محمد","subject":"lang1_arb"},
{"question":"ما ضد كلمة «كبير»؟","options":["طويل","صغير","واسع","ثقيل"],"answer":"صغير","subject":"lang1_arb"},
{"question":"أيّ من الآتي فعل؟","options":["كتب","كتاب","كاتب","مكتبة"],"answer":"كتب","subject":"lang1_arb"},
{"question":"ما معنى كلمة «مدرسة»؟","options":["مسجد","بيت","سوق","مدرسة"],"answer":"مدرسة","subject":"lang1_arb"},
{"question":"أيّ من الآتي حرف جر؟","options":["في","كتب","كتاب","كبير"],"answer":"في","subject":"lang1_arb"},
{"question":"ما مؤنث كلمة «ولد»؟","options":["بنت","امرأة","أخت","أم"],"answer":"بنت","subject":"lang1_arb"},
{"question":"أيّ من الآتي اسم إشارة؟","options":["جميل","كتب","مدرسة","هذا"],"answer":"هذا","subject":"lang1_arb"},
{"question":"ما معنى كلمة «قلم»؟","options":["دفتر","كتاب","قلم","حقيبة"],"answer":"قلم","subject":"lang1_arb"},
{"question":"ما جمع كلمة «كتاب»؟","options":["كتيب","كتبة","كتب","كتابة"],"answer":"كتب","subject":"lang1_arb"},
{"question":"أيّ من الآتي ضمير؟","options":["هو","محمد","كتاب","مدرسة"],"answer":"هو","subject":"lang1_arb"},


{"question":"संस्कृतस्य प्रथमः व्याकरणग्रन्थः कः?","options":["अस्मिता","अष्टाध्यायी","महाभाष्य","कर्मकांड"],"answer":"अष्टाध्यायी","subject":"lang1_skt"},
{"question":"'गच्छति' इत्यस्य धातुः रूपम् किम्?","options":["पठ","गम्","लेख","भू"],"answer":"गम्","subject":"lang1_skt"},
{"question":"'रामः वनं गच्छति' वाक्ये क्रियापदं किम्?","options":["रामः","वनं","गच्छति","पुल्लिङ्ग"],"answer":"गच्छति","subject":"lang1_skt"},
{"question":"'सप्त' शब्दस्य अर्थः किम्?","options":["पाँच","सात","तीन","नौ"],"answer":"सात","subject":"lang1_skt"},
{"question":"'मित्रम्' शब्दस्य कारकः कः?","options":["कर्ता","कर्म","सम्बोधन","अपादान"],"answer":"सम्बोधन","subject":"lang1_skt"},
{"question":"'रामः फलानि खादति' इत्यस्मिन् वाक्ये फलानि किम्?","options":["कर्ता","अपादान","कर्म","करण"],"answer":"कर्म","subject":"lang1_skt"},
{"question":"'बालकः पठति' वाक्ये 'बालकः' कस्य रूपम्?","options":["कर्ता","कर्म","करण","संबोधन"],"answer":"कर्ता","subject":"lang1_skt"},
{"question":"'रामेण सीताम् दृष्टा' इत्यस्मिन् वाक्ये कः कर्म कारकः?","options":["रामेण","सीताम्","दृष्टा","अपि न"],"answer":"सीताम्","subject":"lang1_skt"},
{"question":"'सिंहः वनम् आगतः' इत्यस्मिन् 'आगतः' क्रियापदस्य लिङ्गम् किम्?","options":["स्त्रीलिङ्ग","नपुंसकलिङ्ग","उदयति","पुल्लिङ्ग"],"answer":"पुल्लिङ्ग","subject":"lang1_skt"},
{"question":"'गच्छतु' इत्यस्य वाक्यस्य लकारः कः?","options":["लट्","लिट्","विधिलिङ्ग","विधिलकार"],"answer":"विधिलकार","subject":"lang1_skt"},
{"question":"'धर्मः फलदायी' इत्यस्मिन् 'फलदायी' विशेषणस्य अर्थः किम्?","options":["धीम","पुल्लिङ्ग","लाभदायक","दुष्ट"],"answer":"लाभदायक","subject":"lang1_skt"},
{"question":"'मित्रस्य पाठशालायाम् आगच्छाम' इत्यस्मिन् वाक्ये कारकः कः?","options":["कर्ता","कर्म","सम्बोधन","अपादान"],"answer":"अपादान","subject":"lang1_skt"},
{"question":"'अहं पाठशालां यामि' इत्यस्मिन् 'यामि' क्रियापदस्य पुरुषः कः?","options":["तृतीयः","प्रथमः","कर्ता","द्वितीयः"],"answer":"प्रथमः","subject":"lang1_skt"},

{"question":"മലയാളഭാഷയിലെ ആദ്യത്തെ വ്യാകരണഗ്രന്ഥം ഏതാണ്?","options":["ലീലാതിലകം","കേരളീയവ്യാകരണം","ശബ്ദതാരാവലി","ഭാഷാഭൂഷണം"],"answer":"ലീലാതിലകം","subject":"lang1_mal1"},
{"question":"‘ആധുനിക മലയാളത്തിന്റെ പിതാവ്’ എന്നറിയപ്പെടുന്നത് ആര്?","options":["തുഞ്ചത്ത് എഴുത്തച്ഛൻ","വള്ളത്തോൾ നാരായണമേനോൻ","എ.ആർ. രാജരാജവർമ്മ","കുമാരനാശാൻ"],"answer":"എ.ആർ. രാജരാജവർമ്മ","subject":"lang1_mal1"},
{"question":"‘കിളിപ്പാട്ട്’ എന്ന സാഹിത്യരൂപം പ്രചാരം നേടിയത് ആരിലൂടെ?","options":["കുമാരനാശാൻ","ഉള്ളൂർ","വള്ളത്തോൾ","തുഞ്ചത്ത് എഴുത്തച്ഛൻ"],"answer":"തുഞ്ചത്ത് എഴുത്തച്ഛൻ","subject":"lang1_mal1"},
{"question":"മലയാളത്തിലെ ആദ്യ നോവൽ ഏതാണ്?","options":["ഇന്ദുലേഖ","മാർത്താണ്ഡവർമ്മ","കുന്ദലത","രാമരാജബഹദൂർ"],"answer":"കുന്ദലത","subject":"lang1_mal1"},
{"question":"ഇന്ദുലേഖ’യുടെ കർത്താവ് ആര്?","options":["ഒ.ചന്തുമേനോൻ","സി.വി. രാമൻ പിള്ള","തകഴി ശിവശങ്കരപിള്ള","എസ്.കെ.പൊറ്റക്കാട്"],"answer":"ഒ.ചന്തുമേനോൻ","subject":"lang1_mal1"},
{"question":"‘വീരശൃംഖല’ എന്ന കാവ്യകൃതി രചിച്ചത് ആര്?","options":["കുമാരനാശാൻ","ഉള്ളൂർ","വള്ളത്തോൾ","ചങ്ങമ്പുഴ"],"answer":"വള്ളത്തോൾ","subject":"lang1_mal1"},
{"question":"‘അസുരവിത്ത്’ എന്ന നോവലിന്റെ കർത്താവ് ആര്?","options":["തകഴി","ബഷീർ","പൊൻകുന്നം വർക്കി","ലളിതാംബിക അന്തർജനം"],"answer":"ലളിതാംബിക അന്തർജനം","subject":"lang1_mal1"},
{"question":"വൈക്കം മുഹമ്മദ് ബഷീർ’ ഏത് സാഹിത്യശാഖയിൽ കൂടുതലായി അറിയപ്പെടുന്നു?","options":["കവിത","നാടകം","കഥ","നോവൽ"],"answer":"നോവൽ","subject":"lang1_mal1"},
{"question":"‘ചെമ്മീൻ’ എന്ന നോവലിന്റെ കർത്താവ് ആര്?","options":["എസ്.കെ. പൊറ്റക്കാട്","തകഴി ശിവശങ്കരപിള്ള","ബഷീർ","എം.ടി. വാസുദേവൻ നായർ"],"answer":"തകഴി ശിവശങ്കരപിള്ള","subject":"lang1_mal1"},
{"question":"‘മലയാളത്തിന്റെ മഹാകവി’ എന്ന് അറിയപ്പെടുന്നത് ആര്?","options":["തുഞ്ചത്ത് എഴുത്തച്ഛൻ","കുമാരനാശാൻ","വള്ളത്തോൾ","ഉള്ളൂർ"],"answer":"തുഞ്ചത്ത് എഴുത്തച്ഛൻ","subject":"lang1_mal1"},
{"question":"‘നളചരിതം ആട്ടക്കഥ’യുടെ കർത്താവ് ആര്?","options":["കുഞ്ചൻ നമ്പ്യാർ","മേൽപ്പത്തൂർ നാരായണ ഭട്ടതിരി","എഴുത്തച്ഛൻ","കൊട്ടാരത്തിൽ ശങ്കുണ്ണി"],"answer":"മേൽപ്പത്തൂർ നാരായണ ഭട്ടതിരി","subject":"lang1_mal1"},
{"question":"‘തുള്ളൽ’ എന്ന കലാരൂപത്തിന്റെ ഉപജ്ഞാതാവ് ആര്?","options":["എഴുത്തച്ഛൻ","കുഞ്ചൻ നമ്പ്യാർ","വള്ളത്തോൾ","ആശാൻ"],"answer":"കുഞ്ചൻ നമ്പ്യാർ","subject":"lang1_mal1"},{"question":"‘സാഹിത്യപഞ്ചകം’ എന്നറിയപ്പെടുന്നവയിൽ ഉൾപ്പെടാത്തത് ഏത്?","options":["കുമാരനാശാൻ","വള്ളത്തോൾ","ചങ്ങമ്പുഴ","ഉള്ളൂർ"],"answer":"ചങ്ങമ്പുഴ","subject":"lang1_mal1"},
{"question":"‘ഗുരുസാഗരം’ എന്ന കൃതിയുടെ കർത്താവ് ആര്?","options":["എം.ടി. വാസുദേവൻ നായർ","ഒ.വി. വിജയൻ","ബഷീർ","തകഴി"],"answer":"ഒ.വി. വിജയൻ","subject":"lang1_mal1"},
{"question":"‘കവിത’ എന്ന സാഹിത്യരൂപത്തിന്റെ പ്രധാന ലക്ഷണം ഏത്?","options":["സംഭവവിവരണം","ചരിത്രവിവരണം","വികാരപ്രകടനം","നിയമവിവരണം"],"answer":"വികാരപ്രകടനം","subject":"lang1_mal1"},

{"question":"“പകല്‍ പകലായിരിക്കുന്നു” വാചകത്തില്‍ പദത്തിന്റെ തരം ഏതാണ്?","options":["ക്രിയ","വിശേഷണം","നാമം","സന്ധി"],"answer":"വിശേഷണം","subject":"mal2"},
{"question":"“കിളി പറന്നു പോയി” വാചകത്തില്‍ കര്‍ത്താവ് ആര്?","options":["കിളി","പറന്നു","പോയി","പറന്നു പോയി"],"answer":"കിളി","subject":"mal2"},
{"question":"“കുട്ടികള്‍ ആട് കളിച്ചുകൊണ്ടിരുന്നു” വാചകത്തിലെ ക്രിയാവിശേഷണം ഏതാണ്?","options":["കളിച്ചുകൊണ്ടിരുന്നു","കളിച്ചു","കുട്ടികള്‍","ആട്"],"answer":"കളിച്ചുകൊണ്ടിരുന്നു","subject":"mal2"},
{"question":"“അവള്‍ പുസ്തകം വായിച്ചു” വാചകത്തില്‍ “പുസ്തകം” എതു?","options":["കര്‍മ്മം","കര്‍ത്താവ്","ക്രിയ","വിശേഷണം"],"answer":"കര്‍മ്മം","subject":"mal2"},
{"question":"“മഴ വന്നു” വാചകത്തില്‍ കാലം ഏത്?","options":["ഭൂതകാലം","വൃത്തകാലം","ലഹിതകാലം","ഭാവി"],"answer":"ഭൂതകാലം","subject":"mal2"},
{"question":"“സൂര്യന്‍ ഉദിച്ചു” വാചകത്തിലെ ക്രിയാപദം ഏത്?","options":["സൂര്യന്‍","ഉദിച്ചു","ഇവ രണ്ട‍ും","ഇവ രണ്ട‍ുമല്ല"],"answer":"ഉദിച്ചു","subject":"mal2"},
{"question":"“നന്ദനത്തിന്റെ പുസ്തകം പുതിയതാണ്” വാചകത്തില്‍ “പുതിയ” പദത്തിന്റെ തരം ഏത്?","options":["നാമം","വിശേഷണം","ക്രിയ","കര്‍ത്താവ്"],"answer":"വിശേഷണം","subject":"mal2"},
{"question":"അമ്മ' എന്ന പദത്തിന്റെ പര്യായപദം അല്ലാത്തത് ഏത്?","options":["ജനനി","പ്രസവിത്രി","തനയ","മാതാവ്"],"answer":"തനയ","subject":"mal2"},
{"question":"ചക്കരപ്പന്തലിൽ തേൻമഴ പെയ്തതുപോലെ' - ഈ ശൈലി കൊണ്ട് അർത്ഥമാക്കുന്നത് എന്ത്?","options":["വലിയ അപകടം","അപ്രതീക്ഷിതമായ സന്തോഷം","കഠിനമായ ദുഃഖം","വലിയ മഴ"],"answer":"അപ്രതീക്ഷിതമായ സന്തോഷം","subject":"mal2"},
{"question":"താഴെ പറയുന്നവയിൽ ശരിയായ പദം ഏത്?","options":["ആശിർവാദം","ആശീർവാദം","ആശിർവ്വാദം","ആശീർവ്വാദം"],"answer":"ആശീർവ്വാദം","subject":"mal2"},
{"question":"'കടക്കണ്ണാൽ നോക്കുക' എന്ന ശൈലിയുടെ അർത്ഥം?","options":["ദേഷ്യപ്പെടുക","പരിഹസിക്കുക","പ്രേമപൂർവ്വം നോക്കുക","സൂക്ഷിച്ചു നോക്കുക"],"answer":"പ്രേമപൂർവ്വം നോക്കുക","subject":"mal2"},
{"question":"പാവപ്പെട്ടവരുടെ പടത്തലവൻ' എന്ന് വിശേഷിപ്പിക്കപ്പെടുന്നത് ആര്?","options":["എ.കെ.ജി","ഇ.എം.എസ്","പട്ടം താണുപിള്ള","സി.എച്ച്. മുഹമ്മദ് കോയ"],"answer":"എ.കെ.ജി","subject":"mal2"},
{"question":"ഒരു പൈതൽ' - ഇതിലെ 'പൈതൽ' എന്ന വാക്കിന്റെ ലിംഗമേത്?","options":["സ്ത്രീലിംഗം","പുല്ലിംഗം","നപുംസകലിംഗം","ഉഭയലിംഗം"],"answer":"ഉഭയലിംഗം","subject":"mal2"},
{"question":"'കണ്ണടയ്ക്കുക' എന്ന ശൈലി കൊണ്ട് അർത്ഥമാക്കുന്നത്?","options":["ഉറങ്ങുക","മരിക്കുക","അവഗണിക്കുക","പേടിക്കുക"],"answer":"മരിക്കുക","subject":"mal2"},
{"question":"'പുകഴ്ത്തുക' എന്ന വാക്കിന്റെ വിപരീത പദം?","options":["തഴ്ത്തുക","ഇകഴ്ത്തുക","വെറുക്കുക","നന്ദികേട്"],"answer":"ഇകഴ്ത്തുക","subject":"mal2"},{"question":"'അണ്ണാൻ കുഞ്ഞും തന്നാലായത്' എന്ന പഴഞ്ചൊല്ലിന്റെ അർത്ഥം?","options":["വലിയ കാര്യങ്ങൾ ചെയ്യുക","അറിവില്ലായ്മ","കഴിവിനേക്കാൾ കൂടുതൽ ചെയ്യുക","ചെറിയ സഹായം പോലും വിലപ്പെട്ടതാണ്"],"answer":"ചെറിയ സഹായം പോലും വിലപ്പെട്ടതാണ്","subject":"mal2"},

{"question":"What is the sum of the first 20 natural numbers?","options":["190","210","400","420"],"answer":"210","subject":"maths"},
{"question":"A person buys a toy for 250 rupees and sells it for 300 rupees. What is the profit percentage?","options":["10%","15%","20%","25%"],"answer":"20%","subject":"maths"},
{"question":"What is the smallest 4-digit number that is a perfect square?","options":["1000","1024","1089","1225"],"answer":"1024","subject":"maths"},
{"question":"The average of five consecutive numbers is 15. Which is the largest number in this group?","options":["15","16","17","19"],"answer":"17","subject":"maths"},
{"question":"How many degrees does the minute hand of a clock turn in 20 minutes?","options":["60°","90° C","120°","180°"],"answer":"120°","subject":"maths"},
{"question":"The base of a triangle is 10 cm and its height is 6 cm. What is its area?","options":["60 sq.cm","15 sq.cm","45 sq.cm","30 sq.cm"],"answer":"30 sq.cm","subject":"maths"},
{"question":"What is the difference between the largest 3-digit number and the smallest 3-digit number?","options":["899","900","998","999"],"answer":"899","subject":"maths"},
{"question":"What is the HCF (Highest Common Factor) of 24 and 36?","options":["6","8","12","18"],"answer":"12","subject":"maths"},
{"question":"A cube has a side length of 4 cm. What is its volume?","options":["16 cubic cm","32 cubic cm","64 cubic cm","96 cubic cm"],"answer":"64 cubic cm","subject":"maths"},
{"question":"If a dozen pens cost 120 rupees, what is the cost of 5 pens?","options":["40 rupees","50 rupees","60 rupees","70 rupees"],"answer":"50 rupees","subject":"maths"},
{"question":"Which of the following is a factor of every number?","options":["0","1","2","4"],"answer":"1","subject":"maths"},
{"question":"If the area of a rectangle is 50 sq.cm and its length is 10 cm, what is its breadth?","options":["5 cm","10 cm","15 cm","40 cm"],"answer":"5 cm","subject":"maths"},
{"question":"What is the next number in the pattern: 1, 4, 9, 16, ...?","options":["20","24","25","36"],"answer":"25","subject":"maths"},
{"question":"Express 0.05 as a percentage.","options":["0.5%","5%","50%","0.05%"],"answer":"5%","subject":"maths"},{"question":"How many vertices does a triangle have?","options":["2","3","4","1"],"answer":"3","subject":"maths"},
{"question":"A car travels 120 km in 3 hours. What is its average speed?","options":["30 km/hr","40 km/hr","50 km/hr","60 km/hr"],"answer":"40 km/hr","subject":"maths"},
{"question":"What is the LCM of 4 and 6?","options":["2","10","12","24"],"answer":"12","subject":"maths"},
{"question":"What is the supplement of an angle of 70°?","options":["20°","30°","110°","180°"],"answer":"110°","subject":"maths"},
  
{"question":"Choose the correctly spelled word:","options":["Receive","Recieve","Riceive","Receeve"],"answer":"Receive","subject":"eng"},
{"question":"Which is the antonym (opposite) of the word 'Ancient'","options":["Old","Historic","Antique","Modern"],"answer":"Modern","subject":"eng"},
{"question":"Complete the sentence: \"The sun _______ in the east.\"","options":["rise","rises","rising","risen"],"answer":"rises","subject":"eng"},
{"question":"Find the collective noun for a group of lions:","options":["Pack","Herd","Pride","Flock"],"answer":"Pride","subject":"eng"},
{"question":"dentify the adjective in the sentence: \"The hungry fox saw the grapes.\"","options":["Fox","Grapes","Saw","Hungry"],"answer":"Hungry","subject":"eng"},
{"question":"Choose the correct article: \"He is _______ honest man.\"","options":["a","an","the","and"],"answer":"an","subject":"eng"},
{"question":"What is the past tense of the verb 'Eat'?","options":["Eaten","Eating","Ate","Eats"],"answer":"Ate","subject":"eng"},{"question":"Which word is a synonym for 'Huge'?","options":["Small","Tiny","Enormous","Weak"],"answer":"Enormous","subject":"eng"},{"question":"\"I have been waiting here _______ two hours.\" (Fill in the blank)","options":["since","from","at","for"],"answer":"for","subject":"eng"},
{"question":"Who is the author of the famous book 'The Jungle Book'?","options":["William Shakespeare","Rudyard Kipling","Enid Blyton","Robert Frost"],"answer":"Rudyard Kipling","subject":"eng"},
{"question":"Choose the correctly punctuated sentence:","options":["where are you going","Where are you going?","Where are you going!","where are you going?"],"answer":"Where are you going?","subject":"eng"},
{"question":"The young one of a sheep is called:","options":["Calf","Kid","Lamb","Cub"],"answer":"Lamb","subject":"eng"},{"question":"Which of these is a compound word?","options":["Teacher","Classroom","Slowly","Running"],"answer":"Classroom","subject":"eng"},
{"question":"Identify the silent letter in the word 'Knife':","options":["K","N","I","F"],"answer":"K","subject":"eng"},{"question":"Find the odd one out:","options":["Apple","Mango","Potato","Orange"],"answer":"Potato","subject":"eng"},
  
  
{"question":"Which part of the plant prepares food?","options":["Root","Stem","Leaf","Flower"],"answer":"Leaf","subject":"bs"},
{"question":"Which gas is essential for respiration in living organisms?","options":["Carbon dioxide","Nitrogen","Oxygen","Hydrogen"],"answer":"Oxygen","subject":"bs"},
{"question":"Which organ pumps blood throughout the human body?","options":["Brain","Lungs","Heart","Liver"],"answer":"Heart","subject":"bs"},
{"question":"Which of the following is a non-living thing?","options":["Tree","Dog","Stone","Bird"],"answer":"Stone","subject":"bs"},{"question":"Which vitamin is produced in our body when exposed to sunlight?","options":["Vitamin A","Vitamin B","Vitamin C","Vitamin D"],"answer":"Vitamin D","subject":"bs"},
{"question":"What is the change of water into water vapour called?","options":["Condensation","Evaporation","Freezing","Melting"],"answer":"Evaporation","subject":"bs"},
{"question":"Which sense organ helps us to hear sounds?","options":["Eye","Nose","Ear","Skin"],"answer":"Ear","subject":"bs"},{"question":"Which part of the body helps in breathing?","options":["Heart","Stomach","Kidney","Lungs"],"answer":"Lungs","subject":"bs"},
{"question":"Which of the following animals is a herbivore?","options":["Lion","Tiger","Cow","Fox"],"answer":"Cow","subject":"bs"},{"question":"What force pulls objects towards the Earth?","options":["Magnetic force","Frictional force","Gravitational force","Muscular force"],"answer":"Gravitational force","subject":"bs"},
{"question":"Which material is attracted by a magnet?","options":["Plastic","Wood","Iron","Glass"],"answer":"Iron","subject":"bs"},{"question":"Which organ helps plants to absorb water from soil?","options":["Leaf","Flower","Stem","Root"],"answer":"Root","subject":"bs"},
{"question":"Which gas is released during photosynthesis?","options":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],"answer":"Oxygen","subject":"bs"},
{"question":"Which of the following is a renewable resource?","options":["Coal","Petroleum","Natural gas","Wind"],"answer":"Wind","subject":"bs"},
  
  


{"question":"Which line divides the Earth into Northern and Southern Hemispheres?","options":["Tropic of Cancer","Tropic of Capricorn","Equator","Prime Meridian"],"answer":"Equator","subject":"ss"},
{"question":"Which is the smallest continent in the world?","options":["Europe","Australia","Antarctica","South America"],"answer":"Australia","subject":"ss"},
{"question":"The invention of the wheel belongs to which period?","options":["Paleolithic Age","Mesolithic Age","Iron Age","Neolithic Age"],"answer":"Neolithic Age","subject":"ss"},
{"question":"Which river is known as the ‘Sorrow of Bihar’?","options":["Son","Gandak","Kosi","Yamuna"],"answer":"Kosi","subject":"ss"},
{"question":"What is the main occupation of people living in coastal areas?","options":["Mining","Fishing","Forestry","Weaving"],"answer":"Fishing","subject":"ss"},
{"question":"Which latitude passes through the middle of India?","options":["Equator","Tropic of Cancer","Arctic Circle","Prime Meridian"],"answer":"Tropic of Cancer","subject":"ss"},
{"question":"The Harappa and Mohenjo-daro civilizations developed along which river?","options":["Ganga","Yamuna","Indus","Brahmaputra"],"answer":"Indus","subject":"ss"},
{"question":"Which type of rainfall is common in Kerala?","options":["Convectional rainfall","Cyclonic rainfall","Orographic rainfall","Acid rainfall"],"answer":"Orographic rainfall","subject":"ss"},
{"question":"Who is called the ‘Father of the Indian Constitution’?","options":["Jawaharlal Nehru","B. R. Ambedkar","Mahatma Gandhi","Rajendra Prasad"],"answer":"B. R. Ambedkar","subject":"ss"},
{"question":"Which soil is most suitable for growing cotton?","options":["Black soil","Alluvial soil","Laterite soil","Red soil"],"answer":"Black soil","subject":"ss"},
{"question":"What is the main function of the Legislature?","options":["To make laws","To conduct elections","To interpret laws","To enforce laws"],"answer":"To make laws","subject":"ss"},
{"question":"Which freedom movement was launched in 1942?","options":["Non-Cooperation Movement","Quit India Movement","Swadeshi Movement","Civil Disobedience Movement"],"answer":"Quit India Movement","subject":"ss"},
{"question":"Which renewable resource is obtained from flowing water?","options":["Hydroelectric power","Coal","Petroleum","Natural gas"],"answer":"Hydroelectric power","subject":"ss"},
{"question":"What does the scale on a map represent?","options":["Direction","Height","Area","Distance"],"answer":"Distance","subject":"ss"},
{"question":"Which level of government works at the village level in India?","options":["Central Government","State Government","Panchayati Raj","Judiciary"],"answer":"Panchayati Raj","subject":"ss"},

{"question":"Find the missing number in the series: 3, 9, 27, ?, 243","options":["54","72","81","162"],"answer":"81","subject":"mental"},
{"question":"If ✦ + ✦ + ✦ = 21 and ✦ − ● = 3, what is the value of ●?","options":["2","4","3","5"],"answer":"4","subject":"mental"},{"question":"Which number will replace the question mark? 8 : 64 :: 7 : ?","options":["48","56","42","49"],"answer":"49","subject":"mental"},
{"question":"A clock shows 3:20. What is the angle between the hour hand and minute hand?","options":["10°","20°","30°","40°"],"answer":"10°","subject":"mental"},
{"question":"Find the odd one out.","options":["169","144","196","121"],"answer":"121","subject":"mental"},
{"question":"If 5 workers can complete a work in 12 days, how many days will 10 workers take to complete the same work?","options":["4","6","8","5"],"answer":"6","subject":"mental"},
{"question":"Which number is missing in the pattern? 2, 6, 12, 20, ?","options":["30","36","28","32"],"answer":"28","subject":"mental"},
{"question":"If the perimeter of a square is 48 cm, what is its area?","options":["196 sqcm","256 sqcm","324 sqcm","144 sqcm"],"answer":"144 sqcm","subject":"mental"},
{"question":"A number when divided by 5 leaves remainder 3. What will be the remainder when the same number is divided by 10?","options":["3","5","8","Cannot be determined"],"answer":"Cannot be determined","subject":"mental"},
{"question":"Find the value of: (16 × 5) ÷ (4 × 2)","options":["10","5","8","20"],"answer":"10","subject":"mental"},
{"question":"If today is Tuesday, what day will it be after 100 days?","options":["Wednesday","Thursday","Friday","Saturday"],"answer":"Thursday","subject":"mental"},
{"question":"How many triangles are there in a square divided by both diagonals?","options":["4","6","8","10"],"answer":"8","subject":"mental"},{"question":"Which fraction is the largest?","options":["3/4","5/8","7/10","2/3"],"answer":"3/4","subject":"mental"},
{"question":"If the ratio of boys to girls in a class is 3:5 and the total students are 40, how many boys are there?","options":["12","18","24","15"],"answer":"15","subject":"mental"},
{"question":"A number is multiplied by 4 and then 6 is subtracted. The result is 26. What is the number?","options":["6","9","8","7"],"answer":"8","subject":"mental"},
  
{"question":"India is chairing which major international group in 2026, hosting its summit?","options":["G7","ASEAN","QUAD","BRICS"],"answer":"BRICS","subject":"current"},
{"question":"Which major global multi-sport event’s King's Baton Relay included a unique relay across continents ahead of 2026?","options":["Olympic Games","Commonwealth Games","Asian Games","Youth Olympics"],"answer":"Commonwealth Games","subject":"current"},
{"question":"Who won the 2025 Women’s Cricket World Cup?","options":["Australia","England","India","South Africa"],"answer":"India","subject":"current"},
{"question":"India and which partner finalized a landmark trade deal in January 2026?","options":["USA","EU","UK","China"],"answer":"EU","subject":"current"},
{"question":"What global systemic risk was highlighted by the Doomsday Clock movement in 2025–2026?","options":["Economic collapse","Space debris","Climate & geopolitical tensions","Global pandemic"],"answer":"Climate & geopolitical tensions","subject":"current"},
{"question":"The 2026 BWF World Championships in badminton are scheduled to be held in which Indian city?","options":["Mumbai","New Delhi","Bengaluru","Chennai"],"answer":"New Delhi","subject":"current"},
{"question":"What major climate-related crisis affected southern Africa in 2025 with extreme rainfall?","options":["Flooding","Cyclone","Drought","Earthquake"],"answer":"Flooding","subject":"current"},
{"question":"Which major UAE initiative in early 2026 will host multiple international summits across governance and trade?","options":["Expo 2030","Six International Summits","Global Trade Forum","World Economic Summit"],"answer":"Six International Summits","subject":"current"},
{"question":"India hosted the 2025 Women’s Cricket World Cup along with which other country?","options":["Sri Lanka","Bangladesh","Pakistan","New Zealand"],"answer":"Sri Lanka","subject":"current"},
{"question":"In 2026, which of these sectors saw diplomatic and export focus at Gulfood 2026 in Dubai?","options":["Textiles","Automobiles","Agriculture & Food","IT Services"],"answer":"Agriculture & Food","subject":"current"},
{"question":"The 2026 BRICS summit’s primary motto under India’s chairmanship includes which theme?","options":["Financial Liberalization","Resilience, Innovation & Sustainability","Military Alliance","Space Race"],"answer":"Resilience, Innovation & Sustainability","subject":"current"},
{"question":"Which sporting milestone marked India’s position in global aviation rankings in 2025?","options":["Best Airline Award","3rd in World’s Best Low-Cost Airlines","Most Flights Operated","Highest Passenger Growth"],"answer":"3rd in World’s Best Low-Cost Airlines","subject":"current"},
{"question":"India’s largest position in rice production and exports was highlighted at which event?","options":["G20 Summit","Bharat International Rice Conference","Food Expo","World Economic Forum"],"answer":"Bharat International Rice Conference","subject":"current"},
{"question":"What major renewable energy achievement was noted for India by the International Energy Agency?","options":["2nd highest increase in nuclear capacity","Top rank in solar exports","3rd highest increase in power generation capacity","Highest wind energy output"],"answer":"3rd highest increase in power generation capacity","subject":"current"},
{"question":"Which new major global climate pattern was tied to disastrous weather events in 2025?","options":["La Niña","La Niña","Indian Ocean Dipole","Madden–Julian Oscillation"],"answer":"La Niña","subject":"current"}
];

let user = null; let examQs = []; let myChart = null;
let examTimer = null; let timeLeft = 900; 

function checkPersistentLogin() {
const savedUser = localStorage.getItem('uss_user');
if(savedUser) {
user = JSON.parse(savedUser);
finalizeLogin();
}
}

function showLoading(txt) {
document.getElementById('loader-text').innerText = txt;
document.getElementById('loader-content').style.display = 'flex';
document.getElementById('status-content').style.display = 'none';
document.getElementById('msg-overlay').style.display = 'flex';
}

function showStatus(title, msg, type = 'success') {
document.getElementById('loader-content').style.display = 'none';
document.getElementById('status-content').style.display = 'block';
document.getElementById('status-icon').innerText = (type === 'success' ? "" : "");
document.getElementById('status-title').innerText = title;
document.getElementById('status-title').style.color = (type === 'success' ? "var(--success)" : "var(--error)");
document.getElementById('status-msg').innerText = msg;
}

function closeMsg() { document.getElementById('msg-overlay').style.display = 'none'; }

function handleLogin() {
showLoading("Syncing...");
const idInput = document.getElementById('uid').value.toUpperCase().trim();
const passInput = document.getElementById('ups').value.trim();
const keep = document.getElementById('keep-signed').checked;

user = students.find(s => s.id === idInput && s.pass === passInput);
if(user) {
if(keep) localStorage.setItem('uss_user', JSON.stringify(user));
finalizeLogin();
} else { showStatus("", "Invalid Credentials", ""); }
}

function finalizeLogin() {
  document.getElementById('sticky-header-container').style.display = 'block';
  document.getElementById('user-profile').style.display = 'flex';
  document.getElementById('display-name').innerText = user.name;
  document.getElementById('user-initial').innerText = user.name.charAt(0);
  document.getElementById('tab1').classList.remove('active');
  document.getElementById('navbar').style.display = 'flex';

  /* 🔐 ROLE-BASED NAV */
  if (user.role === 'teacher') {
    document.getElementById('admin-nav').style.display = 'block';
    document.getElementById('ins-nav').style.display = 'block';
  } else {
    document.getElementById('admin-nav').style.display = 'none';
    document.getElementById('ins-nav').style.display = 'none';
  }
  loadAttendance();   // ✅ ADD THIS
  showTab('tab2');
  closeMsg();
}
  function hideNavForExam() {
  document.querySelectorAll('#navbar button').forEach(b => {
    b.style.display = 'none';
  });
  document.getElementById('nav-timer').style.display = 'block';
}

function restoreNavAfterExam() {
  document.getElementById('nav-tab2').style.display = 'inline-block';
  document.getElementById('nav-tab3').style.display = 'inline-block';

  if (user.role === 'teacher') {
    document.getElementById('admin-nav').style.display = 'inline-block';
    document.getElementById('ins-nav').style.display = 'inline-block';
  }

  document.getElementById('nav-timer').style.display = 'none';
}
  
function logout() {
localStorage.removeItem('uss_user');
location.reload();
}

function showTab(tid) {
document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));
document.getElementById(tid).classList.add('active');
if(document.getElementById('nav-'+tid)) document.getElementById('nav-'+tid).classList.add('active-nav');
if(tid === 'tab3') loadProgress();
if(tid === 'tab5') loadInspirations();
window.scrollTo({top: 0, behavior: 'smooth'});
}

function startExamWithTimer() {
  generateExam();
  document.getElementById('s-btn').style.display = 'block';

  timeLeft = 900;
  hideNavForExam();

  if (examTimer) clearInterval(examTimer);

  examTimer = setInterval(() => {
    timeLeft--;
    let min = Math.floor(timeLeft / 60);
    let sec = timeLeft % 60;
    document.getElementById('nav-timer').innerText =
      `${min}:${sec < 10 ? '0' : ''}${sec}`;

    if (timeLeft === 180) {
      document.getElementById('nav-timer').classList.add('timer-warn');
    }

    if (timeLeft <= 0) {
      clearInterval(examTimer);
      submitExam();
    }
  }, 1000);
}

function tryQuizAgain() {
  document.getElementById('exam-result-view').style.display = 'none';
  document.getElementById('exam-form').style.display = 'block';
  document.getElementById('lang-select').value = "";
  document.getElementById('quiz-load').innerHTML = "";
  document.getElementById('s-btn').style.display = 'none';

  restoreNavAfterExam();
  document.getElementById('nav-timer').classList.remove('timer-warn');
}

function generateExam() {
const lang = document.getElementById('lang-select').value;
const subs = [lang, 'mal2', 'maths', 'eng', 'bs', 'ss', 'mental', 'current'];
examQs = [];
subs.forEach(s => {
let pool = masterBank.filter(q => q.subject === s);
pool.sort(() => 0.5 - Math.random());
examQs.push(...pool.slice(0, 3));
});
renderExam();
}

function renderExam() {
let h = "";
examQs.forEach((q, i) => {

const isArabic = q.subject === "lang1_arb";
const rtlClass = isArabic ? "rtl-arabic" : "";

h += `
<div class="q-card ${rtlClass}">
<div style="font-size:0.7rem; color:var(--primary); font-weight:800; text-transform:uppercase;">
${q.subject}
</div>
<p class="${rtlClass}" style="font-weight:600; margin:10px 0;">
${i+1}. ${q.question}
</p>
`;

q.options.forEach((o, j) => {
h += `
<div class="${rtlClass}">
<input type="radio" id="q${i}_opt${j}" name="qz${i}" value="${o}">
<label for="q${i}_opt${j}" class="option-label ${rtlClass}">

${o}
</label>
</div>
`;
});

h += `</div>`;
});

document.getElementById('quiz-load').innerHTML = h || "Exam data missing...";
}

async function submitExam() {
  clearInterval(examTimer);
  restoreNavAfterExam();
  document.getElementById('nav-timer').classList.remove('timer-warn');
showLoading("Syncing...");
let sc = {lang1:0, mal2:0, maths:0, eng:0, bs:0, ss:0, mental:0, current:0};
let total = 0; let reviewHTML = "";

examQs.forEach((q, i) => {
const sel = document.querySelector(`input[name="qz${i}"]:checked`);
const uAns = sel ? sel.value.trim().toLowerCase() : "none";
const correctAns = q.answer.trim().toLowerCase();
const isCorrect = uAns === correctAns;


if (isCorrect) {
  total++;

  // Normalize subject key
  let key = q.subject.startsWith("lang1_") ? "lang1" : q.subject;

  // Safety check before increment
  if (sc.hasOwnProperty(key)) {
    sc[key] += 1;
  } else {
    console.warn("Unknown subject:", q.subject);
  }
}

const userColor = (uAns === q.answer) ? 'var(--success)' : 'var(--error)';
const correctColor = 'var(--success)';

reviewHTML += `
<div style="padding:12px; margin-bottom:8px; background:#fff; border:1px solid #eee; border-radius:10px;">
  <p style="margin:0 0 5px 0; font-size:0.9rem;">
    <b>Q${i+1}.</b> ${q.question}
  </p>

  <p style="margin:2px 0; font-size:0.85rem;">
    Your Answer:
    <span style="color:${isCorrect ? 'var(--success)' : 'var(--error)'}; font-weight:700;">
      ${uAns}
    </span>
  </p>

  <p style="margin:2px 0; font-size:0.85rem;">
    Correct Answer:
    <span style="color:var(--success); font-weight:700;">
      ${correctAns}
    </span>
  </p>
</div>
`;

});

try {
const dStr = new Date().toLocaleDateString('en-GB');
const perc = (total/24)*100;
const grade = getGrade(perc);
const reviewObj = {
  date: dStr,
  total: total,
  grade: grade,
  scores: sc
};

// save to localStorage
let history = JSON.parse(localStorage.getItem("uss_reviews") || "[]");
history.push(reviewObj);
localStorage.setItem("uss_reviews", JSON.stringify(history));


await fetch(SCRIPT_URL, { method: "POST", body: JSON.stringify({
name: user.name, class: user.class, division: user.div, date: dStr, scores: sc, total: total
})});

document.getElementById('exam-form').style.display = 'none';
document.getElementById('exam-result-view').style.display = 'block';

document.getElementById('res-date').innerText = dStr;
document.getElementById('res-name').innerText = user.name;
document.getElementById('res-cl').innerText = user.class;
document.getElementById('res-dv').innerText = user.div;
document.getElementById('res-uid').innerText = user.id;
document.getElementById('res-lang1').innerText = document.getElementById('lang-select').value.split('_')[1].toUpperCase();
document.getElementById('res-total').innerText = total;
document.getElementById('res-grade-badge').innerText = grade;

let sumHTML = "";
for(let s in sc) { sumHTML += `<div style="background:white; padding:10px; border-radius:10px; border-bottom:3px solid var(--accent); text-align:center;"><div style="font-size:0.6rem; color:#888;">${s.toUpperCase()}</div><div style="font-weight:700;">${sc[s]}/3</div></div>`; }
document.getElementById('res-summary').innerHTML =
  renderPerformanceCard(reviewObj);

document.getElementById('res-review-list').innerHTML = reviewHTML;
closeMsg();
} catch(e) { showStatus("Error", "Check Connection", "error"); }
}

async function loadProgress() {
if(SCRIPT_URL === "YOUR_WEB_APP_URL") return;
showLoading("Syncing...");
try {
const res = await fetch(`${SCRIPT_URL}?name=${user.name}`);
const data = await res.json();

document.getElementById('summ-name').innerText = user.name;
document.getElementById('summ-class').innerText = user.class;
document.getElementById('summ-div').innerText = user.div;

if(data.length > 0) {
const values = data.map(r => r[13]);
const grandTotal = values.reduce((a, b) => a + b, 0);
const avg = (grandTotal / (data.length * 24)) * 100;

document.getElementById('summ-count').innerText = data.length;
document.getElementById('summ-grand').innerText = grandTotal;
document.getElementById('p-grade').innerText = getGrade(avg);

if(myChart) myChart.destroy();
myChart = new Chart(document.getElementById('chartArea'), {
type: 'line',
data: { labels: data.map(r => r[0]), datasets: [{ label: 'Score', data: values, borderColor: '#4361ee', tension: 0.4, fill: true, backgroundColor: 'rgba(67,97,238,0.1)' }] },
options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
});
}
  // Load all saved performance reviews
const reviewBox = document.getElementById("my-review-list");
const history = JSON.parse(localStorage.getItem("uss_reviews") || "[]");

if (history.length === 0) {
  reviewBox.innerHTML =
    "<p style='color:#666; font-size:0.9rem;'>No exams attempted yet.</p>";
} else {
  let h = "";
  for (let i = history.length - 1; i >= 0; i--) {
  h += renderPerformanceCard(history[i], i);
}
  reviewBox.innerHTML = h;
}

  
closeMsg();
} catch(e) { showStatus("Error", "Load Failed", "error"); }
}

function renderPerformanceCard(review, index = null) {
  let grid = "";
  for (let s in review.scores) {
    grid += `
      <div style="background:white; padding:8px; border-radius:10px;
                  border-bottom:3px solid var(--accent); text-align:center;">
        <div style="font-size:0.6rem; color:#888;">${s.toUpperCase()}</div>
        <div style="font-weight:700;">${review.scores[s]}/3</div>
      </div>
    `;
  }

  return `
    <div class="glass-card" style="margin-bottom:15px;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <b>Exam ${index !== null ? index + 1 : ""}</b>
        <span style="font-size:0.8rem; color:#666;">${review.date}</span>
      </div>

      <div style="margin:8px 0; font-size:0.9rem;">
        <b>Total:</b> ${review.total}/24 |
        <b>Grade:</b>
        <span style="color:var(--primary); font-weight:800;">
          ${review.grade}
        </span>
      </div>

      <div class="summary-grid">
        ${grid}
      </div>
    </div>
  `;
}


async function loadInspirations() {
if(SCRIPT_URL === "YOUR_WEB_APP_URL") return;
showLoading("Updating...");
const body = document.getElementById('ins-body');
try {
const res = await fetch(`${SCRIPT_URL}?type=allStudents`);
const data = await res.json();
const studentsMap = {};
data.forEach(row => {
const key = `${row[1]}-${row[2]}-${row[3]}`;
if(!studentsMap[key]) studentsMap[key] = { name: row[1], class: row[2], div: row[3], l1:0, m2:0, math:0, eng:0, bs:0, ss:0, ma:0, ca:0, total:0, exams:0 };
const s = studentsMap[key];
s.l1 += row[5]; s.m2 += row[6]; s.math += row[7]; s.eng += row[8];
s.bs += row[9]; s.ss += row[10]; s.ma += row[11]; s.ca += row[12];
s.total += row[13]; s.exams++;
});
populateStudentDropdown(data);
let h = "";
Object.values(studentsMap).forEach(s => {
const perc = (s.total / (s.exams * 24)) * 100;
h += `<tr><td style="font-weight:700;">${s.name}</td><td>${s.class}</td><td>${s.div}</td><td>${s.l1}</td><td>${s.m2}</td><td>${s.math}</td><td>${s.eng}</td><td>${s.bs}</td><td>${s.ss}</td><td>${s.ma}</td><td>${s.ca}</td><td>${s.exams}</td><td style="color:var(--primary); font-weight:700;">${s.total}</td><td>${getGrade(perc)}</td></tr>`;
});
body.innerHTML = h; closeMsg();
} catch(e) { showStatus("Error", "Load Error", "error"); }

  
}

function getGrade(p) {
if(p >= 80) return "A"; if(p >= 60) return "B"; if(p >= 40) return "C";
if(p >= 30) return "D"; if(p >= 29) return "E"; return "E";
}

function sortTable(n) {
const table = document.getElementById("ins-table");
let rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
switching = true; dir = "desc";
while (switching) {
switching = false; rows = table.rows;
for (i = 1; i < (rows.length - 1); i++) {
shouldSwitch = false;
x = rows[i].getElementsByTagName("TD")[n];
y = rows[i + 1].getElementsByTagName("TD")[n];
let xVal = isNaN(x.innerText) ? x.innerText.toLowerCase() : parseFloat(x.innerText);
let yVal = isNaN(y.innerText) ? y.innerText.toLowerCase() : parseFloat(y.innerText);
if (dir == "asc") { if (xVal > yVal) { shouldSwitch = true; break; } }
else { if (xVal < yVal) { shouldSwitch = true; break; } }
}
if (shouldSwitch) { rows[i].parentNode.insertBefore(rows[i + 1], rows[i]); switching = true; switchcount ++; }
else { if (switchcount == 0 && dir == "desc") { dir = "asc"; switching = true; } }
}
}

function makeQ() {
	const qSub = document.getElementById('qs').value;
    const qText = document.getElementById('qt').value;
    const opt1 = document.getElementById('o1').value;
    const opt2 = document.getElementById('o2').value;
    const opt3 = document.getElementById('o3').value;
    const opt4 = document.getElementById('o4').value;
    const qAns = document.getElementById('qa').value;
    const qAnsIndex = parseInt(document.getElementById('qa').value, 10);
	if (isNaN(qAnsIndex) || qAnsIndex < 0 || qAnsIndex > 3) {
  		showStatus("Warning", "Correct answer must be 0, 1, 2, or 3", "error");
  		return;
	}

    if(!qText || !opt1 || !qAns) {
        showStatus("Warning", "Please fill essential fields", "error");
        return;
    }

    const q = {
  	question: qText,
  	options: [opt1, opt2, opt3, opt4],
  	answer: qAnsIndex,   // ✅ STORE INDEX
  	subject: qSub
	};
    const generatedCode = JSON.stringify(q) + ",";
    const textArea = document.getElementById('q-code');
    textArea.value += generatedCode;

    // Copy to clipboard
    navigator.clipboard.writeText(textArea.value).then(() => {
        // Clear fields
        document.getElementById('qt').value = "";
        document.getElementById('o1').value = "";
        document.getElementById('o2').value = "";
        document.getElementById('o3').value = "";
        document.getElementById('o4').value = "";
        document.getElementById('qa').value = "";
        
        // Success Message (Overlay style)
        showStatus("Success", "Code generated and copied to clipboard!");
    }).catch(err => {
        showStatus("Copy Error", "Failed to auto-copy code.", "error");
    });
}
  
  function lockExamDateTime(value) {

  // Case 1: Google Sheets serial (number)
  if (typeof value === "number") {
    const date = new Date(Math.floor((value - 25569) * 86400 * 1000));
    const time = (value % 1) * 24 * 60 * 60 * 1000;
    return new Date(date.getTime() + time).toLocaleString("en-GB", {
      day: "2-digit",
      month: "short",
      year: "numeric",
      hour12: true
    });
  }

  // Case 2: ISO string with timezone (Z / +xx)
  if (typeof value === "string" && value.includes("T")) {
    const clean = value.replace("Z", "").split(".")[0];
    const [date, time] = clean.split("T");
    const [y, m, d] = date.split("-");
    const [h, min] = time.split(":");

    return new Date(y, m - 1, d, h, min).toLocaleString("en-GB", {
      day: "2-digit",
      month: "short",
      year: "numeric",
      hour12: true
    });
  }

  // Case 3: Plain string → display as-is
  return value;
}
  
  
 function populateStudentDropdown(data) {
  const select = document.getElementById("student-select");
  select.innerHTML = `<option value="">-- Choose Student --</option>`;

  const seen = new Set();

  data.forEach(row => {
    const name = row[1];
    if (!seen.has(name)) {
      seen.add(name);
      const opt = document.createElement("option");
      opt.value = name;
      opt.textContent = name;
      select.appendChild(opt);
    }
  });
}
  
  let studentChart = null;

async function loadStudentExams() {
  const studentName = document.getElementById("student-select").value;
  if (!studentName) return;

  showLoading("Loading Student Exams...");

  try {
    const res = await fetch(`${SCRIPT_URL}?name=${studentName}`);
    const data = await res.json();

    const labels = [];
    const totals = [];
    let html = "";

    // Reverse order: latest exam first
// Reverse order: last exam first
const reversedData = [...data].reverse();

reversedData.forEach((r, i) => {
  const date = lockExamDateTime(r[4]);
  const scores = {
    L1: r[5], M2: r[6], Math: r[7], Eng: r[8],
    BS: r[9], SS: r[10], MA: r[11], CA: r[12]
  };
  const total = r[13];
  const grade = getGrade((total / 24) * 100);

  html += `
    <div class="glass-card">
      <b>Exam ${reversedData.length - i}</b> – ${date}<br>
      <b>Total:</b> ${total}/24 |
      <b>Grade:</b>
      <span style="font-weight:800;color:var(--primary)">${grade}</span>

      <div class="summary-grid" style="margin-top:10px;">
        ${Object.entries(scores).map(([k,v]) => `
          <div style="background:#fff;padding:8px;border-radius:10px;text-align:center;">
            <div style="font-size:0.6rem;color:#888">${k}</div>
            <b>${v}</b>
          </div>
        `).join("")}
      </div>
    </div>
  `;
});

	
    document.getElementById("student-exam-list").innerHTML = html;

    if (studentChart) studentChart.destroy();
    studentChart = new Chart(
      document.getElementById("studentExamChart"), {
        type: "bar",
        data: {
          labels,
          datasets: [{
            label: "Total Score",
            data: totals,
            backgroundColor: "rgba(67,97,238,0.6)"
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: { y: { beginAtZero: true, max: 24 } }
        }
      }
    );

    closeMsg();
  } catch (e) {
    showStatus("Error", "Unable to load student exams", "error");
    console.log("RAW EXAM DATE:", r[0], typeof r[0]);
  }
}

  
  async function loadAttendance() {
  const tbody = document.getElementById("attendance-body");
  tbody.innerHTML = `
    <tr>
      <td colspan="2" style="padding:12px;text-align:center;">Loading…</td>
    </tr>`;

  try {
    // Fetch all exam records
    const res = await fetch(`${SCRIPT_URL}?type=allStudents`);
    const data = await res.json();

    // Count exams per student name
    const examCount = {};
    data.forEach(row => {
      const name = row[1]; // student name
      examCount[name] = (examCount[name] || 0) + 1;
    });

    // Build table using const students
    let html = "";
    students
      .filter(s => s.role === "student")
      .forEach(s => {
        html += `
          <tr>
            <td style="padding:10px; border:1px solid #ddd; text-align:left;">
              ${s.name}
            </td>
            <td style="padding:10px; border:1px solid #ddd; text-align:center; font-weight:700;">
              ${examCount[s.name] || 0}
            </td>
          </tr>`;
      });

    tbody.innerHTML = html;

  } catch (e) {
    tbody.innerHTML = `
      <tr>
        <td colspan="2" style="padding:12px;color:red;text-align:center;">
          Failed to load attendance
        </td>
      </tr>`;
  }
}
  
  


 function copyAttendanceTable() {
  const rows = document.querySelectorAll("#attendance-table tr");
  let text = "";

  rows.forEach(row => {
    const cols = row.querySelectorAll("th, td");
    const line = Array.from(cols).map(c => c.innerText).join("\t");
    text += line + "\n";
  });

  navigator.clipboard.writeText(text).then(() => {
    alert("Attendance table copied!");
  });
}

let attendanceSort = {
  column: null,
  asc: true
};

function sortAttendance(colIndex) {
  const tbody = document.getElementById("attendance-body");
  const rows = Array.from(tbody.querySelectorAll("tr"));

  // Toggle sort direction
  if (attendanceSort.column === colIndex) {
    attendanceSort.asc = !attendanceSort.asc;
  } else {
    attendanceSort.column = colIndex;
    attendanceSort.asc = true;
  }

  rows.sort((a, b) => {
    let A = a.children[colIndex].innerText.trim();
    let B = b.children[colIndex].innerText.trim();

    // Number sort for exam count
    if (colIndex === 1) {
      A = Number(A);
      B = Number(B);
    } else {
      A = A.toLowerCase();
      B = B.toLowerCase();
    }

    if (A < B) return attendanceSort.asc ? -1 : 1;
    if (A > B) return attendanceSort.asc ? 1 : -1;
    return 0;
  });

  tbody.innerHTML = "";
  rows.forEach(r => tbody.appendChild(r));

  updateSortIcons();
}

  
function updateSortIcons() {
  document.getElementById("sort-name").innerText = "";
  document.getElementById("sort-exams").innerText = "↕";

  const icon = attendanceSort.asc ? "" : "";
  if (attendanceSort.column === 0) {
    document.getElementById("sort-name").innerText = icon;
  }
  if (attendanceSort.column === 1) {
    document.getElementById("sort-exams").innerText = icon;
  }
}

  
  
</script>
</body>
</html>
